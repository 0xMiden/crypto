<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The backing storage for the SMT forest, providing the necessary high-level methods for performing operations on the full trees that make up the forest, while allowing the forest itself to be storage agnostic."><title>Backend in miden_crypto::merkle::smt - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-b7b9f40b.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="miden_crypto" data-themes="" data-resource-suffix="" data-rustdoc-version="1.95.0-nightly (a423f68a0 2026-02-13)" data-channel="nightly" data-search-js="search-fb33671b.js" data-stringdex-js="stringdex-b897f86f.js" data-settings-js="settings-170eb4bf.js" ><script src="../../../static.files/storage-f9617a14.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-12f88f4f.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-f7c3ffd8.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><a class="skip-main-content" href="#main-content">Skip to main content</a><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Backend</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../miden_crypto/index.html">miden_<wbr>crypto</a><span class="version">0.23.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Backend</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#backend-data-storage" title="Backend Data Storage">Backend Data Storage</a></li><li><a href="#error-handling" title="Error Handling">Error Handling</a></li><li><a href="#expected-behavior" title="Expected Behavior">Expected Behavior</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.add_lineage" title="add_lineage">add_lineage</a></li><li><a href="#tymethod.entries" title="entries">entries</a></li><li><a href="#tymethod.entry_count" title="entry_count">entry_count</a></li><li><a href="#tymethod.get" title="get">get</a></li><li><a href="#tymethod.lineages" title="lineages">lineages</a></li><li><a href="#tymethod.open" title="open">open</a></li><li><a href="#tymethod.trees" title="trees">trees</a></li><li><a href="#tymethod.update_forest" title="update_forest">update_forest</a></li><li><a href="#tymethod.update_tree" title="update_tree">update_tree</a></li><li><a href="#tymethod.version" title="version">version</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In miden_<wbr>crypto::<wbr>merkle::<wbr>smt</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content" tabindex="-1"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">miden_crypto</a>::<wbr><a href="../index.html">merkle</a>::<wbr><a href="index.html">smt</a></div><h1>Trait <span class="trait">Backend</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#70-181">Source</a> </span></div><pre class="rust item-decl"><code>pub trait Backend<div class="where">where
    Self: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,</div>{
    // Required methods
    fn <a href="#tymethod.open" class="fn">open</a>(
        &amp;self,
        lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>,
        key: <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.SmtProof.html" title="struct miden_crypto::merkle::smt::SmtProof">SmtProof</a>, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get" class="fn">get</a>(
        &amp;self,
        lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>,
        key: <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.version" class="fn">version</a>(&amp;self, lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="type" href="type.VersionId.html" title="type miden_crypto::merkle::smt::VersionId">VersionId</a>, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.lineages" class="fn">lineages</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.trees" class="fn">trees</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="struct" href="struct.TreeWithRoot.html" title="struct miden_crypto::merkle::smt::TreeWithRoot">TreeWithRoot</a>&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.entry_count" class="fn">entry_count</a>(&amp;self, lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.entries" class="fn">entries</a>(
        &amp;self,
        lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="struct" href="struct.TreeEntry.html" title="struct miden_crypto::merkle::smt::TreeEntry">TreeEntry</a>&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.add_lineage" class="fn">add_lineage</a>(
        &amp;mut self,
        lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>,
        version: <a class="type" href="type.VersionId.html" title="type miden_crypto::merkle::smt::VersionId">VersionId</a>,
        updates: <a class="struct" href="struct.SmtUpdateBatch.html" title="struct miden_crypto::merkle::smt::SmtUpdateBatch">SmtUpdateBatch</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.TreeWithRoot.html" title="struct miden_crypto::merkle::smt::TreeWithRoot">TreeWithRoot</a>, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.update_tree" class="fn">update_tree</a>(
        &amp;mut self,
        lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>,
        new_version: <a class="type" href="type.VersionId.html" title="type miden_crypto::merkle::smt::VersionId">VersionId</a>,
        updates: <a class="struct" href="struct.SmtUpdateBatch.html" title="struct miden_crypto::merkle::smt::SmtUpdateBatch">SmtUpdateBatch</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.MutationSet.html" title="struct miden_crypto::merkle::smt::MutationSet">MutationSet</a>&lt;SMT_DEPTH, <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>, <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.update_forest" class="fn">update_forest</a>(
        &amp;mut self,
        new_version: <a class="type" href="type.VersionId.html" title="type miden_crypto::merkle::smt::VersionId">VersionId</a>,
        updates: <a class="struct" href="struct.SmtForestUpdateBatch.html" title="struct miden_crypto::merkle::smt::SmtForestUpdateBatch">SmtForestUpdateBatch</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(<a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>, <a class="struct" href="struct.MutationSet.html" title="struct miden_crypto::merkle::smt::MutationSet">MutationSet</a>&lt;SMT_DEPTH, <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>, <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>&gt;)&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The backing storage for the SMT forest, providing the necessary high-level methods for
performing operations on the full trees that make up the forest, while allowing the forest
itself to be storage agnostic.</p>
<h2 id="backend-data-storage"><a class="doc-anchor" href="#backend-data-storage">§</a>Backend Data Storage</h2>
<p>Having a generic <a href="trait.Backend.html" title="trait miden_crypto::merkle::smt::Backend"><code>Backend</code></a> provides no guarantees to the user about how it stores data and
what patterns are used for data access under the hood. It is, however, guaranteed to store
<em>only</em> the data necessary to describe the latest state of each tree in the forest.</p>
<h2 id="error-handling"><a class="doc-anchor" href="#error-handling">§</a>Error Handling</h2>
<p>We separate errors in backend implementations into two semantic categories:</p>
<ol>
<li><strong>User-Derived Errors:</strong> These are errors that arise downstream of data provided by the user.
These errors must be signaled by returning an <a href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html#variant.Err" title="variant core::result::Result::Err"><code>Err</code></a> variant with an appropriate error.</li>
<li><strong>Internal Errors:</strong> These are errors that are not derived from data provided by the user.
Signaling such an error is up to the implementation, but can be done through both panicking
and returning the <a href="enum.BackendError.html#variant.Internal" title="variant miden_crypto::merkle::smt::BackendError::Internal"><code>BackendError::Internal</code></a> variant as appropriate. These <strong>may leave the
backend in an inconsistent state</strong> as they are designed to effect program termination or
perform it directly.</li>
</ol>
<p>The only reason that <a href="enum.BackendError.html#variant.Internal" title="variant miden_crypto::merkle::smt::BackendError::Internal"><code>BackendError::Internal</code></a> exists is to allow certain failures to result in
termination at the level of the <em>forest</em> instead of the <em>backend</em> as this can sometimes lead to
cleaner logic. If this is not appropriate, a panic is a better option.</p>
<h2 id="expected-behavior"><a class="doc-anchor" href="#expected-behavior">§</a>Expected Behavior</h2>
<p>Certain methods on this trait (e.g. <a href="trait.Backend.html#tymethod.update_tree" title="method miden_crypto::merkle::smt::Backend::update_tree"><code>Backend::update_tree</code></a>) provide behaviors expected for
that method. These combine with the following trait-level behavior requirements to become part
of the contract of the method, but a portion that cannot be encoded in the type system. Any
failure to conform to these expected behaviors is <strong>considered a bug in the implementation</strong> of
the backend, and must be rectified.</p>
<p>The following behavior is expected of all methods in implementations of this trait:</p>
<ul>
<li>For any failure derived from user input (see <em>User-Derived Errors</em> above), the data and the
backend must be <strong>left in a consistent state</strong> when the error is returned to the caller.</li>
<li>Failures derived from user input (see <em>User-Derived Errors</em> above) must be signaled to the
caller by returning a variant of <a href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError"><code>BackendError</code></a> that is <strong>not <a href="enum.BackendError.html#variant.Internal" title="variant miden_crypto::merkle::smt::BackendError::Internal"><code>BackendError::Internal</code></a></strong>.
Methods may place additional constraints on which errors are used to signal certain failures.</li>
</ul>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.open" class="method"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#81">Source</a><h4 class="code-header">fn <a href="#tymethod.open" class="fn">open</a>(&amp;self, lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>, key: <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.SmtProof.html" title="struct miden_crypto::merkle::smt::SmtProof">SmtProof</a>, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;</h4></section></summary><div class="docblock"><p>Returns an opening for the specified <code>key</code> in the SMT with the specified <code>lineage</code>.</p>
<p>It is the responsibility of the forest to ensure lineage existence before querying the
backend. The backend must return an error if the lineage does not exist.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get" class="method"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#88">Source</a><h4 class="code-header">fn <a href="#tymethod.get" class="fn">get</a>(
    &amp;self,
    lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>,
    key: <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the value associated with the provided <code>key</code> in the SMT with the specified
<code>lineage</code>, or <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="variant core::option::Option::None"><code>None</code></a> if no such value exists.</p>
<p>It is the responsibility of the forest to ensure lineage existence before querying the
backend. The backend must return an error if the lineage does not exist.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.version" class="method"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#94">Source</a><h4 class="code-header">fn <a href="#tymethod.version" class="fn">version</a>(&amp;self, lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="type" href="type.VersionId.html" title="type miden_crypto::merkle::smt::VersionId">VersionId</a>, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the version of the tree with the specified <code>lineage</code>.</p>
<p>It is the responsibility of the forest to ensure lineage existence before querying the
backend. The backend must return an error if the lineage does not exist.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.lineages" class="method"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#99">Source</a><h4 class="code-header">fn <a href="#tymethod.lineages" class="fn">lineages</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;</h4></section></summary><div class="docblock"><p>Returns an iterator over all the lineages that the backend knows about.</p>
<p>The iteration order is unspecified.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.trees" class="method"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#105">Source</a><h4 class="code-header">fn <a href="#tymethod.trees" class="fn">trees</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="struct" href="struct.TreeWithRoot.html" title="struct miden_crypto::merkle::smt::TreeWithRoot">TreeWithRoot</a>&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;</h4></section></summary><div class="docblock"><p>Returns an iterator over all the trees (and their corresponding roots) that the backend
knows about.</p>
<p>The iteration order is unspecified.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.entry_count" class="method"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#111">Source</a><h4 class="code-header">fn <a href="#tymethod.entry_count" class="fn">entry_count</a>(&amp;self, lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the total number of (key-value) entries in the specified <code>lineage</code>.</p>
<p>It is the responsibility of the forest to ensure lineage existence before querying the
backend. The backend must return an error if the lineage does not exist.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.entries" class="method"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#122">Source</a><h4 class="code-header">fn <a href="#tymethod.entries" class="fn">entries</a>(
    &amp;self,
    lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="struct" href="struct.TreeEntry.html" title="struct miden_crypto::merkle::smt::TreeEntry">TreeEntry</a>&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;</h4></section></summary><div class="docblock"><p>Returns an iterator that yields the populated (key-value) entries for the specified
<code>lineage</code>.</p>
<p>It is the responsibility of the forest to ensure lineage existence before querying the
backend. The backend must return an error if the lineage does not exist.</p>
<p>This iterator must yield entries in an order such that they are sorted by their leaf index,
and entries that share a leaf index are sorted by key. It must not include key-value pairs
where the value is the empty word.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.add_lineage" class="method"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#137-142">Source</a><h4 class="code-header">fn <a href="#tymethod.add_lineage" class="fn">add_lineage</a>(
    &amp;mut self,
    lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>,
    version: <a class="type" href="type.VersionId.html" title="type miden_crypto::merkle::smt::VersionId">VersionId</a>,
    updates: <a class="struct" href="struct.SmtUpdateBatch.html" title="struct miden_crypto::merkle::smt::SmtUpdateBatch">SmtUpdateBatch</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.TreeWithRoot.html" title="struct miden_crypto::merkle::smt::TreeWithRoot">TreeWithRoot</a>, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;</h4></section></summary><div class="docblock"><p>Adds a new <code>lineage</code> to the forest with the provided <code>version</code> and sets the associated SMT
to have the value created by applying <code>updates</code> to the empty tree, returning the new root of
that tree.</p>
<h5 id="expected-behavior-1"><a class="doc-anchor" href="#expected-behavior-1">§</a>Expected Behavior</h5>
<p>Implementations must guarantee the following behavior in addition to the global invariants:</p>
<ul>
<li>If the provided <code>lineage</code> conflicts with an already-existing lineage in the backend, it
must return <a href="enum.BackendError.html#variant.DuplicateLineage" title="variant miden_crypto::merkle::smt::BackendError::DuplicateLineage"><code>BackendError::DuplicateLineage</code></a>.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.update_tree" class="method"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#154-159">Source</a><h4 class="code-header">fn <a href="#tymethod.update_tree" class="fn">update_tree</a>(
    &amp;mut self,
    lineage: <a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>,
    new_version: <a class="type" href="type.VersionId.html" title="type miden_crypto::merkle::smt::VersionId">VersionId</a>,
    updates: <a class="struct" href="struct.SmtUpdateBatch.html" title="struct miden_crypto::merkle::smt::SmtUpdateBatch">SmtUpdateBatch</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.MutationSet.html" title="struct miden_crypto::merkle::smt::MutationSet">MutationSet</a>&lt;SMT_DEPTH, <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>, <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;</h4></section></summary><div class="docblock"><p>Performs the provided <code>updates</code> on the tree with the specified <code>lineage</code>, returning the
mutation set that will revert the changes made to the tree.</p>
<h5 id="expected-behavior-2"><a class="doc-anchor" href="#expected-behavior-2">§</a>Expected Behavior</h5>
<p>Implementations must guarantee the following behavior in addition to the global invariants:</p>
<ul>
<li>At most one new root must be added to the forest for the entire batch.</li>
<li>If applying the provided <code>updates</code> results in no changes to the tree, no new tree must be
allocated.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.update_forest" class="method"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/mod.rs.html#176-180">Source</a><h4 class="code-header">fn <a href="#tymethod.update_forest" class="fn">update_forest</a>(
    &amp;mut self,
    new_version: <a class="type" href="type.VersionId.html" title="type miden_crypto::merkle::smt::VersionId">VersionId</a>,
    updates: <a class="struct" href="struct.SmtForestUpdateBatch.html" title="struct miden_crypto::merkle::smt::SmtForestUpdateBatch">SmtForestUpdateBatch</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(<a class="struct" href="struct.LineageId.html" title="struct miden_crypto::merkle::smt::LineageId">LineageId</a>, <a class="struct" href="struct.MutationSet.html" title="struct miden_crypto::merkle::smt::MutationSet">MutationSet</a>&lt;SMT_DEPTH, <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>, <a class="struct" href="../../word/struct.Word.html" title="struct miden_crypto::word::Word">Word</a>&gt;)&gt;, <a class="enum" href="enum.BackendError.html" title="enum miden_crypto::merkle::smt::BackendError">BackendError</a>&gt;</h4></section></summary><div class="docblock"><p>Performs the provided <code>updates</code> on the forest, setting all new tree states to have the
provided <code>new_version</code> and returning a vector of the mutation sets that reverse the changes
to each changed tree.</p>
<h5 id="expected-behavior-3"><a class="doc-anchor" href="#expected-behavior-3">§</a>Expected Behavior</h5>
<p>Implementations must guarantee the following behavior in addition to the global invariants:</p>
<ul>
<li>At most one new root must be added to the forest for each target root in the provided
<code>updates</code>.</li>
<li>If applying the provided <code>updates</code> results in no changes to a given lineage of trees in
the forest, then no new tree must be allocated in that lineage.</li>
</ul>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><div class="negative-marker"></div><section id="impl-Backend-for-InMemoryBackend" class="impl"><a class="src rightside" href="../../../src/miden_crypto/merkle/smt/large_forest/backend/memory/mod.rs.html#49-278">Source</a><a href="#impl-Backend-for-InMemoryBackend" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.Backend.html" title="trait miden_crypto::merkle::smt::Backend">Backend</a> for <a class="struct" href="struct.ForestInMemoryBackend.html" title="struct miden_crypto::merkle::smt::ForestInMemoryBackend">InMemoryBackend</a></h3></section></div><script src="../../../trait.impl/miden_crypto/merkle/smt/large_forest/backend/trait.Backend.js" async></script></section></div></main></body></html>